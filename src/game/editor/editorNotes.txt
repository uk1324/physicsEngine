When something is grabbed don't save the cursor pos as the start point; Snap it to the closest important feature for example a corner. This will allow the automatic snapping to move it the grabbed thing correctly.

When a gizmo is modyfing some set of entites like the selected entites it should save what entites it is modifying on start. The argument passed to the function might always change. One example of the entites changing while they are being modifyied is when doing duplicating the selected entites. This caused weird bugs of things not being undone in order because the translation wasn't being saved because it didn't know that the  entites it were translating changed. The translation was saved only after the entites were duplicated. Another way to avoid this particular issue would be to keep the selected entites the same when duplicating, but this would also require making the new entites have the same state as the old entites, which also means attching the joints which the original entites have, but the new ones don't.
In general the tools should work properly when the selected entites are modified. To do this save the entites when an operation starts. Save the changes and update the state just like if a new operation started (for example grabStartPos) if the entites changed during the operation.
When checking if the selected entites changed also check if the operations was doing performed at the time and only the save and update the state.

When checking if something was released check if it was enabled when it was released.